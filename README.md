一个基于 Go 语言实现的 TCP 聊天服务器和客户端，支持图形界面操作。

## 项目概述

这是一个简单的 TCP 聊天应用程序，包含服务器端和客户端实现。客户端提供图形用户界面 (GUI)，用户可以通过界面连接到服务器、发送消息以及查看聊天记录。

## 功能特性

- ✅ 实时聊天功能
- ✅ 图形用户界面 (GUI)
- ✅ 支持多个客户端同时连接
- ✅ 消息类型区分（聊天消息、系统消息、加入/离开通知）
- ✅ 用户名设置和身份识别
- ✅ 支持中文显示

## 技术栈

- **语言**: Go
- **GUI 框架**: [Fyne](https://www.poloxue.com/gofyne/docs/01-started/)
- **通信协议**: TCP
- **消息格式**: 支持 JSON 和 TLV 格式

## 项目结构

```
tcpchat/
├── client/          # 客户端逻辑
├── gui/             # 图形用户界面
├── message/         # 消息处理（JSON/TLV格式）
├── model/           # 数据模型
└── server/          # 服务器端逻辑
```

## 安装和运行

### 环境要求

- Go 1.16 或更高版本
- Fyne 依赖项（会自动安装）

### 安装依赖

```bash
go mod tidy
```

### 运行服务器

```bash
go run server/main.go
```

### 运行客户端

```bash
go run client/main.go
```

## 使用说明

### 服务器端

服务器默认监听 `localhost:8080`，支持多个客户端连接。

### 客户端 GUI

1. 启动客户端应用程序
2. 输入服务器地址（例如：`localhost:8080`）
3. 输入用户名
4. 点击"连接"按钮连接到服务器
5. 在底部输入框输入消息并发送

### 界面说明

- **地址输入框**: 输入服务器地址和端口
- **用户名输入框**: 设置聊天时显示的用户名
- **连接按钮**: 连接到指定的服务器
- **消息显示区域**: 显示聊天记录和系统消息
- **消息输入框**: 输入要发送的消息
- **发送按钮**: 发送消息

## 消息类型

系统支持多种消息类型：

- `chat`: 普通聊天消息
- `system`: 系统通知消息
- `setname`: 用户加入通知
- `leave`: 用户离开通知

## 开发说明

### 消息格式

项目支持两种消息格式：
1. **JSON 格式**: 用于简单的文本消息传输
2. **TLV 格式**: Type-Length-Value 格式，用于更高效的二进制传输

### 代码结构

- [gui/ui.go](file:///root/chatserver/gui/ui.go): 图形界面实现
- `client/tcpclient.go`: 客户端网络通信逻辑
- [message/reader.go](file:///root/chatserver/message/reader.go): 消息读取器（支持 JSON 和 TLV）
- [model/message.go](file:///root/chatserver/model/message.go): 消息数据模型

## 未来改进

- [ ] 完善 TLV 格式的完整实现
- [ ] 添加私聊功能
- [ ] 支持表情符号和富文本
- [ ] 添加聊天记录保存功能
- [ ] 支持用户列表显示
- [ ] 添加服务器配置选项
